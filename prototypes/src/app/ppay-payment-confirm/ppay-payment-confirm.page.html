<ion-header>
  <ion-toolbar>
    <ion-title *ngIf="this.fg.get('Type').value=='QR'">จ่ายเงิน</ion-title>
    <ion-title *ngIf="this.fg.get('Type').value=='PP'|| this.fg.get('Type').value=='Bank'">โอน-จ่าย</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content mode="ios">
  <ng-container>
    <form [formGroup]="fg">
      <ion-list lines="none">
        <ion-item color="tertiary" class="ion-margin-top">
          <!-- <img src="assets/imgs/defaultshop.png" class="logo-l circle center ion-margin-top"> -->
          <img class="logo-l circle center ion-margin-top" src="assets/imgs/PromtPay.png"
            *ngIf="(this.fg.get('Type').value=='QR' && this.fg.get('Number').value==1)|| this.fg.get('Type').value=='PP'">
          <img class="logo-l circle center ion-margin-top" src="assets/imgs/PromtPay.png"
            *ngIf="(this.fg.get('Type').value=='QR' && (this.fg.get('Number').value==2||this.fg.get('Number').value==3||this.fg.get('Number').value==4))">
          <img class="logo-l circle center ion-margin-top" [src]="this.fg.get('BankLogo').value"
            *ngIf="this.fg.get('Type').value=='Bank'">
        </ion-item>
        <ion-item color="tertiary" class="ion-text-center">
          <ion-label class="ion-no-margin">
            <h2><b>{{this.fg.get('FirstnameTH').value}} {{this.fg.get('LastnameTH').value}}</b></h2>
            <h2><b>{{this.fg.get('FirstnameEN').value}} {{this.fg.get('LastnameEN').value}}</b></h2>
          </ion-label>
        </ion-item>
        <!-- <ion-item color="tertiary" lines="none">
        <ion-label for="customInputAmount">
          <h2>จำนวนเงินที่จ่าย</h2>
        </ion-label>
      </ion-item> -->

        <ion-item color="tertiary" lines="full">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col class="ion-no-padding">
                <ion-label>
                  <h3 class="line-height2"><b>รายละเอียดการจ่ายเงิน</b></h3>
                </ion-label>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col class="ion-no-padding">
                <ion-label>
                  <h3 class="line-height2">จำนวนเงิน</h3>
                </ion-label>
              </ion-col>
              <ion-col class="ion-no-padding ion-text-right">
                <ion-label>
                  <h3>{{ this.fg.get('Price').value}}.00 <small>THB</small></h3>
                </ion-label>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col class="ion-no-padding">
                <ion-label>
                  <h3 class="line-height2">ค่าธรรมเนียม</h3>
                </ion-label>
              </ion-col>
              <ion-col class="ion-no-padding ion-text-right">
                <ion-label>
                  <h3>{{fee}}.00 <small>THB</small></h3>
                </ion-label>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col class="ion-no-padding">
                <ion-label>
                  <h3 class="line-height2">ส่วนลด</h3>
                </ion-label>
              </ion-col>
              <ion-col class="ion-no-padding ion-text-right">
                <ion-label>
                  <h3>-{{discount}}.00 <small>THB</small></h3>
                </ion-label>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col class="ion-no-padding">
                <ion-label>
                  <h3 class="line-height2">ราคารวมทั้งหมด</h3>
                </ion-label>
              </ion-col>
              <ion-col class="ion-no-padding ion-text-right">
                <ion-label color="danger">
                  <h3>{{this.fg.get('total').value}}.00 <small>THB</small></h3>
                </ion-label>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>

        <ion-item color="tertiary" lines="full">
          <img slot="start" width="22" height="22" class="qr" src="assets/imgs/walletgray.png" />
          <ion-label class="ion-no-margin">
            <h3>{{this.fg.get('Bagname').value}}</h3>
          </ion-label>
          <ion-label slot="end" class="ion-no-margin">
            <h3>เปลี่ยน</h3>
          </ion-label>
        </ion-item>
        <!-- 
        <ion-item color="tertiary" lines="full">
          <ion-label class="ion-no-margin">
            <h3>คูปอง {{this.fg.get('Coupon').value}}</h3>
          </ion-label>
          <ion-item [hidden]='hideList'>
            <ion-label>Choose Country</ion-label>
            <ion-select placeholder="Country" #countryList formControlName="Coupon">
              <ion-select-option value="ส่วนลด 20 THB">ส่วนลด 20 THB</ion-select-option>
              <ion-select-option value="ส่วนลด 50 THB">ส่วนลด 50 THB</ion-select-option>
              <ion-select-option value="คูปองเฉยๆ">คูปองเฉยๆ</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-fab-button class="fab-small" size="small" color="danger">
            <ion-icon color="light" name="add" (click)="selectcoupon()">
            </ion-icon>
          </ion-fab-button>
        </ion-item> -->
        <!-- xxxxx -->
        <ion-item color="tertiary" lines="none">
          <ion-label class="ion-no-margin">
            <h3>ส่วนลด </h3>
          </ion-label>
        </ion-item>
        <div formArrayName="Coupon">
          <ion-list *ngFor="let item of fg.get('Coupon')['controls']; let i=index">
            <ion-item color="tertiary" lines="full" class="ion-no-padding" *ngIf="item.value.checkuse == true">
              <ion-col class="ion-no-padding" size="1">
                <img class="logo-s circle" src="assets/imgs/coupon-small-red.png">
              </ion-col>
              <ion-col class="ion-padding">
                <ion-label style="color: black;">
                  <h3 class="line-height2">{{item.value.name}}</h3>
                </ion-label>
              </ion-col>
              <ion-col class="ion-padding ion-text-right">
                <!-- <ion-label (click)="deletecoupon(i)" style="color: lightgray;">
                  <h3>ลบ</h3>
                </ion-label> -->
              </ion-col>
            </ion-item>
          </ion-list>

        </div>
      </ion-list>

      <ion-item color="tertiary" lines="none">
        <ion-label for="customInputAmount">
          <h2><b>เพิ่มเติม</b></h2>
        </ion-label>
      </ion-item>
      <ion-item color="tertiary" lines="none">
        <ion-label for="customInputAmount" *ngIf="this.fg.get('Number').value==1 || this.fg.get('Type').value=='PP'">
          <h2>เลขที่พร้อมเพย์ {{this.fg.get('Accountnumber').value}}</h2>
        </ion-label>
        <ion-label for="customInputAmount"
          *ngIf="this.fg.get('Number').value==2||this.fg.get('Number').value==3||this.fg.get('Number').value==4">
          <div>
            <h2>BillerId : 01055637789355 </h2>
            <h2>ref1 : 0036671388 </h2>
            <h2>ref2 : 000P8444111</h2>
          </div>
        </ion-label>
        <ion-label for="customInputAmount" *ngIf="this.fg.get('Type').value=='Bank'">
          <h2>เลขที่บัญชี {{this.fg.get('Accountnumber').value}}</h2>
        </ion-label>
      </ion-item>
      <ion-item color="tertiary" lines="none">
        <ion-label for="customInputAmount">
          <h2><b>หมายเหตุ</b></h2>
        </ion-label>
      </ion-item>
      <ion-item color="tertiary" lines="full">
        <ion-textarea type="text" placeholder="" rows="3" formControlName="Remark" [disabled]="true"></ion-textarea>
        <!-- <ion-label class="ion-no-margin">
          <h3>Option Detail</h3>
        </ion-label> -->
      </ion-item>
    </form>
  </ng-container>
</ion-content>

<ion-footer class="ion-no-border">
  <form (ngSubmit)="onSave()">
    <ion-button id="app-form-submit" color="danger" class="ion-no-margin" expand="full" type="submit">จ่าย
    </ion-button>
  </form>
</ion-footer>